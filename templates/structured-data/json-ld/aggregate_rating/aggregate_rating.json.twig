{% extends "structured-data/json-ld.json.twig" %}

{% set data = data|default(page.header.structured_data.aggregate_rating) %}
{% block rawjson %}
  {
    "@context": "https://schema.org/",
    "@id": "{{ data.id|default(uri.url ~ '#aggregate-rating')|escape('js') }}",

    "@type": "AggregateRating",
    "ratingValue": "{{ data.value|escape('js') }}",
    "ratingCount": "{{ data.count|escape('js') }}",
    "bestRating": {{ data.best|default(5)|escape('js') }},
    "worstRating": {{ data.worst|default(1)|escape('js') }}
  }
{% endblock %}
